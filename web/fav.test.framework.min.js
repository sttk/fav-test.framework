!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;(t=(t=(t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).fav||(t.fav={})).test||(t.test={})).framework=e()}}(function(){return function r(c,a,f){function o(t,e){if(!a[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var u=a[t]={exports:{}};c[t][0].call(u.exports,function(e){return o(c[t][1][e]||e)},u,u.exports,r,c,a,f)}return a[t].exports}for(var s="function"==typeof require&&require,e=0;e<f.length;e++)o(f[e]);return o}({1:[function(e,t,r){"use strict";var n=e("./lib/event"),i=e("./lib/tree"),o=e("./lib/hook"),u=e("./lib/async"),c=e("./lib/retry"),a=e("./lib/timeout"),f=e("./lib/slow"),s=e("./lib/only"),l=e("./lib/skip");t.exports=function Framework(){if(!(this instanceof Framework))return new Framework;n(this),i(this),o(this),u(this),c(this),a(this),f(this),s(this),l(this)}},{"./lib/async":2,"./lib/event":3,"./lib/hook":4,"./lib/only":5,"./lib/retry":6,"./lib/skip":7,"./lib/slow":8,"./lib/timeout":10,"./lib/tree":11}],2:[function(e,t,r){"use strict";var i=e("./static"),o=e("./util/define"),n=e("./util/run-async"),u=n.byCallback,c=n.byPromise,a=n.sequentially;o.override(i,function runHook(e,t){var r=0<e.fn.length?u:c;e.context=i.createHookContext(e),r(e,e.context,t)}),o.override(i,function createHookContext(){return{}}),o.override(i,function createSuite(e,t,r){var n=createSuite.$uper(e,t,r);return n.context=i.createSuiteContext(n),o.override(n,function fn(){fn.$uper.call(n.context,arguments)}),n}),o.override(i,function createSuiteContext(){return{}}),o.override(i,function runSuiteBefore(e,t){a(e._before,t)}),o.override(i,function runSuiteBody(e,t){a(e._children,t)}),o.override(i,function runSuiteAfter(e,t){a(e._after,t)}),o.override(i,function createTest(e,t,r){var n=createTest.$uper(e,t,r);return n.context=i.createTestContext(n),n}),o.override(i,function runTestBefore(e,t){a(e._parent._beforeEach,t)}),o.override(i,function runTestBody(e,t){(0<e.fn.length?u:c)(e,e.context,t)}),o.override(i,function runTestAfter(e,t){a(e._parent._afterEach,t)}),o.override(i,function createTestContext(){return{}}),o.override(i,function runTree(e,t){i.runSuite(e,t)}),t.exports=function implement(){}},{"./static":9,"./util/define":13,"./util/run-async":16}],3:[function(e,t,r){"use strict";var n=e("./util/define"),i=e("@fav/type.is-array");function register(e,t){i(this._eventHandlers[e])||n.immutable(this._eventHandlers,e,[]),this._eventHandlers[e].push(t)}function emit(e){var t=this._eventHandlers[e];if(i(t))for(var r=0,n=t.length;r<n;r++){t[r].apply(this,Array.prototype.slice.call(arguments,1))}}t.exports=function implement(e){n.immutable(e,"_eventHandlers",{}),n.method(e,"on",register),n.method(e,"emit",emit)}},{"./util/define":13,"@fav/type.is-array":17}],4:[function(e,t,r){"use strict";var n=e("./util/define"),i=e("./util/callback"),o=e("./static"),u=e("@fav/type.is-function");function before(e,t){u(e)&&(e=(t=e).name||""),o.registerBefore(this,e,t)}function after(e,t){u(e)&&(e=(t=e).name||""),o.registerAfter(this,e,t)}function beforeEach(e,t){u(e)&&(e=(t=e).name||""),o.registerBeforeEach(this,e,t)}function afterEach(e,t){u(e)&&(e=(t=e).name||""),o.registerAfterEach(this,e,t)}n.override(o,function registerBefore(e,t,r){e._current._before.push(o.createHook(e,t,r))}),n.override(o,function registerAfter(e,t,r){e._current._after.push(o.createHook(e,t,r))}),n.override(o,function registerBeforeEach(e,t,r){e._current._beforeEach.push(o.createHook(e,t,r))}),n.override(o,function registerAfterEach(e,t,r){e._current._afterEach.push(o.createHook(e,t,r))}),n.override(o,function createHook(e,t,r){return{title:t,fn:r,run:o.runHook,_framework:e}}),n.override(o,function runHook(e){e.fn()}),n.override(o,function createSuite(e,t,r){var n=createSuite.$uper(e,t,r);return n._before=[],n._after=[],n._beforeEach=n._parent._beforeEach.slice(),n._afterEach=n._parent._afterEach.slice(),n}),n.override(o,function runSuite(e,t){var r=e._framework;r.emit("start",e),o.runSuiteBefore(e,function(){o.runSuiteBody(e,function(){o.runSuiteAfter(e,function(){r.emit("end",e),i(t)})})})}),n.override(o,function runSuiteBefore(e,t){e._before.forEach(o.runHook),t()}),n.override(o,function runSuiteBody(e,t){e._children.forEach(function(e){e.run(e)}),t()}),n.override(o,function runSuiteAfter(e,t){e._after.forEach(o.runHook),t()}),n.override(o,function runTest(e,t){var r=e._framework;r.emit("start",e),o.runTestRetriable(e,function(){r.emit("end",e),i(t)})}),n.override(o,function runTestRetriable(e,t){o.runTestBefore(e,function(){o.runTestBody(e,function(){o.runTestAfter(e,t)})})}),n.override(o,function runTestBefore(e,t){e._parent._beforeEach.forEach(o.runHook),t()}),n.override(o,function runTestBody(e,t){e.fn(),t()}),n.override(o,function runTestAfter(e,t){e._parent._afterEach.forEach(o.runHook),t()}),t.exports=function implement(e){n.mutable(e,"_before",[]),n.mutable(e,"_after",[]),n.mutable(e,"_beforeEach",[]),n.mutable(e,"_afterEach",[]),n.method(e,"before",before),n.method(e,"after",after),n.method(e,"beforeEach",beforeEach),n.method(e,"afterEach",afterEach)}},{"./static":9,"./util/callback":12,"./util/define":13,"@fav/type.is-function":19}],5:[function(e,t,r){"use strict";var n=e("./util/define"),i=e("./static");function onlySuite(e,t){var r=this;r._only.flag&&(r._only.flag=!1),r._only={flag:!0},updateOnlyFlagsOfAscendants(i.registerSuite(r,e,t),r._only),r._only={flag:!1},r._hasOnly=!0}function onlyTest(e,t){var r=this;r._only.flag&&(r._only.flag=!1),r._only={flag:!0},updateOnlyFlagsOfAscendants(i.registerTest(r,e,t),r._only),r._only={flag:!1},r._hasOnly=!0}function updateOnlyFlagsOfAscendants(e,t){for(var r=e._framework;e._parent!==r;)(e=e._parent).only=t}n.override(i,function createSuite(e,t,r){var n=createSuite.$uper(e,t,r);return n.only=e._only,n}),n.override(i,function runSuite(e,t){if(e._framework._hasOnly&&!e.only.flag)return t(),void delete e.yet;runSuite.$uper(e,t)}),n.override(i,function createTest(e,t,r){var n=createTest.$uper(e,t,r);return n.only=e._only,n}),n.override(i,function runTest(e,t){if(e._framework._hasOnly&&!e.only.flag)return t(),void delete e.yet;runTest.$uper(e,t)}),t.exports=function implement(e){n.mutable(e,"_hasOnly",!1),n.mutable(e,"_only",{flag:!1}),n.mutable(e,"only",{flag:!0}),n.method(e,"onlySuite",onlySuite),n.method(e,"onlyTest",onlyTest)}},{"./static":9,"./util/define":13}],6:[function(i,o,e){(function(r){"use strict";var t=i("./util/define"),e=i("./static"),n=i("@fav/type.is-integer");t.override(e,function registerSuite(e,t,r){var n=e._retries,i=registerSuite.$uper(e,t,r);return e._retries=n,i}),t.override(e,function createSuiteContext(e){var t=e._framework,r=createSuiteContext.$uper(e);return r.retries=function(e){n(e)&&(t._retries=e)},r}),t.override(e,function createTest(e,t,r){var n=createTest.$uper(e,t,r);return n.retries=e._retries,n}),t.override(e,function createTestContext(t){var e=createTestContext.$uper(t);return e.retries=function(e){n(e)&&(t.retries=e)},e}),t.override(e,function runTestRetriable(e,t){e.retried=e.retried||0,runTestRetriable.$uper(e,function(){!e.error||e.retries<=e.retried?t():r(function(){e.retried++,e.error=null,e.yet=!0,runTestRetriable(e,t)})})}),o.exports=function implement(e){t.mutable(e,"_retries",0)}}).call(this,i("timers").setImmediate)},{"./static":9,"./util/define":13,"@fav/type.is-integer":20,timers:23}],7:[function(e,t,r){"use strict";var n=e("./util/define"),i=e("./static");function skipSuite(e,t){var r=this._skip;this._skip=!0,i.registerSuite(this,e,t),this._skip=r}function skipTest(e,t){var r=this._skip;this._skip=!0,i.registerTest(this,e,t),this._skip=r}n.override(i,function registerSuite(e,t,r){var n=e._skip,i=registerSuite.$uper(e,t,r);return e._skip=n,i}),n.override(i,function createSuite(e,t,r){var n=createSuite.$uper(e,t,r);return n.skip=e._skip,n}),n.override(i,function createSuiteContext(e){var t=e._framework,r=createSuiteContext.$uper(e);return r.skip=function(){t._skip=!0},r}),n.override(i,function createTest(e,t,r){var n=createTest.$uper(e,t,r);return n.skip=e._skip,n}),n.override(i,function createTestContext(e){var t=createTestContext.$uper(e);return t.skip=function(){throw{skip:e.skip=!0}},t}),n.override(i,function runTest(e,t){var r=e._framework;if(e.skip)return r.emit("start",e),delete e.yet,r.emit("end",e),void t();runTest.$uper(e,t)}),t.exports=function implement(e){n.mutable(e,"_skip",!1),n.method(e,"skipSuite",skipSuite),n.method(e,"skipTest",skipTest)}},{"./static":9,"./util/define":13}],8:[function(e,t,r){"use strict";var n=e("./util/define"),i=e("./static"),o=e("@fav/type.is-integer");n.override(i,function registerSuite(e,t,r){var n=e._slow,i=registerSuite.$uper(e,t,r);return e._slow=n,i}),n.override(i,function createSuiteContext(e){var t=e._framework,r=createSuiteContext.$uper(e);return r.slow=function(e){o(e)&&(t._slow=e)},r}),n.override(i,function createTest(e,t,r){var n=createTest.$uper(e,t,r);return n.slow=e._slow,n}),n.override(i,function createTestContext(t){var e=createTestContext.$uper(t);return e.slow=function(e){o(e)&&(t.slow=e)},e}),t.exports=function implement(e){n.mutable(e,"_slow",100)}},{"./static":9,"./util/define":13,"@fav/type.is-integer":20}],9:[function(e,t,r){"use strict";t.exports={}},{}],10:[function(e,t,r){"use strict";var n=e("./util/define"),i=e("./static"),o=e("@fav/type.is-integer");function setupTimer(e,t){clearTimeout(e.timer),e.timeout?e.timer=setTimeout(function(){e.endTime=Date.now(),e.isTimeout=!0,clearTimeout(e.timer),delete e.timer,delete e.yet,e._framework.emit("timeout",e),t()},e.timeout-(Date.now()-e.startTime)):delete e.timer}n.override(i,function registerSuite(e,t,r){var n=e._timeout,i=registerSuite.$uper(e,t,r);return e._timeout=n,i}),n.override(i,function createSuiteContext(e){var t=e._framework,r=createSuiteContext.$uper(e);return r.timeout=function(e){o(e)&&(t._timeout=e)},r}),n.override(i,function createTest(e,t,r){var n=createTest.$uper(e,t,r);return n.timeout=e._timeout,n}),n.override(i,function runTestBody(t,r){t.context.timeout=function(e){t.timer&&o(e)&&(t.timeout=e,setupTimer(t,r))},t.startTime=Date.now(),setupTimer(t,r),runTestBody.$uper(t,function(){!t.timer&&t.timeout||(t.endTime=Date.now(),clearTimeout(t.timer),delete t.timer,r())})}),t.exports=function implement(e){n.mutable(e,"_timeout",2e3)}},{"./static":9,"./util/define":13,"@fav/type.is-integer":20}],11:[function(e,t,r){"use strict";var i=e("./static"),n=e("./util/define"),o=e("./util/callback");function suite(e,t){i.registerSuite(this,e,t)}function test(e,t){i.registerTest(this,e,t)}function run(e){i.runTree(this,e)}n.override(i,function registerSuite(e,t,r){var n=i.createSuite(e,t,r);return e._current._children.push(n),e._current=n,e._depth++,n.fn(),e._depth--,e._current=n._parent,n}),n.override(i,function createSuite(e,t,r){return{type:"suite",title:t,depth:e._depth,fn:r,run:i.runSuite,_parent:e._current,_children:[],_framework:e,yet:!0}}),n.override(i,function runSuite(e,t){var r=e._framework;r.emit("start",e),e._children.forEach(function(e){e.run(e)}),r.emit("end",e),o(t)}),n.override(i,function registerTest(e,t,r){var n=i.createTest(e,t,r);return e._current._children.push(n),n}),n.override(i,function createTest(e,t,r){return{type:"test",title:t,depth:e._depth,fn:r,run:i.runTest,_parent:e._current,_children:[],_framework:e,yet:!0}}),n.override(i,function runTest(e,t){var r=e._framework;r.emit("start",e),e.fn(),r.emit("end",e),o(t)}),n.override(i,function runTree(e,t){i.runSuite(e),o(t)}),t.exports=function implement(e){n.immutable(e,"_children",[]),n.immutable(e,"_framework",e),n.mutable(e,"_current",e),n.mutable(e,"_depth",0),n.method(e,"suite",suite),n.method(e,"test",test),n.method(e,"run",run)}},{"./static":9,"./util/callback":12,"./util/define":13}],12:[function(e,t,r){"use strict";var n=e("@fav/type.is-function");t.exports=function callback(e){n(e)&&e()}},{"@fav/type.is-function":19}],13:[function(e,t,r){"use strict";var i=e("@fav/type.is-function");function immutable(e,t,r){Object.defineProperty(e,t,{configurable:!0,value:r})}t.exports={immutable:immutable,mutable:function mutable(e,t,r){Object.defineProperty(e,t,{writable:!0,configurable:!0,value:r})},method:function method(e,t,r){Object.defineProperty(e,t,{enumerable:!0,writable:!0,value:r.bind(e)})},override:function override(e,t,r){i(t)&&(t=(r=t).name);var n=e[t];i(n)&&immutable(r,"$uper",n),Object.defineProperty(e,t,{enumerable:!0,writable:!0,value:r})}}},{"@fav/type.is-function":19}],14:[function(e,t,r){"use strict";t.exports=function dontTwice(e,t){return function(){if(!e._called)return Object.defineProperty(e,"_called",{value:!0}),e.apply(this,arguments);t()}}},{}],15:[function(e,t,r){"use strict";var n=e("@fav/type.is-function");t.exports=function isPromiseLike(e){return Boolean(e)&&"object"==typeof e&&n(e.then)&&n(e.catch)}},{"@fav/type.is-function":19}],16:[function(e,t,r){(function(o){"use strict";var u=e("./callback"),c=e("./dont-twice"),a=e("./is-promise-like"),f=e("@fav/type.is-empty");function done(e,t,r){(delete t.yet,r instanceof Error)&&(t.error=r,t._framework.emit("error",t));u(e)}r.byCallback=function(t,e,r){try{var n=!1,i=c(function(e){n||done(r,t,e)},function(){!function causeErrorWhenDoneTwice(e){delete e.yet,e.error=new Error("done() called multiple times");var t=e._framework;t.emit("error",e),t.emit("end",e)}(t)}),o=t.fn.call(e,i);a(o)&&(n=!0,done(r,t,new Error("Resolution method is overspecified. Specify a callback *or* return a Promise; not both.")))}catch(e){done(r,t,e)}},r.byPromise=function(t,e,r){try{var n=t.fn.call(e);if(!a(n))return void done(r,t);n.then(function(){done(r,t)}).catch(function(e){done(r,t,e)})}catch(e){done(r,t,e)}},r.sequentially=function(e,t){!function runSequentially(e,t,r){if(t>=e.length)return void u(r);var n=e[t];o(function(){n.run(n,function(){runSequentially(e,t+1,r)})})}(e,0,t)},r.parallelly=function(e,r){if(e.length){for(var n={},t=0,i=e.length;t<i;t++)n[t]=!0;e.forEach(function(e,t){o(function(){e.run(e,function(){delete n[t],f(n)&&u(r)})})})}else u(r)}}).call(this,e("timers").setImmediate)},{"./callback":12,"./dont-twice":14,"./is-promise-like":15,"@fav/type.is-empty":18,timers:23}],17:[function(e,t,r){"use strict";function isArray(e){return Array.isArray(e)}Object.defineProperty(isArray,"not",{enumerable:!0,value:function isNotArray(e){return!Array.isArray(e)}}),t.exports=isArray},{}],18:[function(e,t,r){"use strict";var n=e("@fav/type.is-array"),i=e("@fav/type.is-plain-object");function isEmpty(e){if(null==e)return!0;if(n(e)&&0===e.length)return!0;if(i(e)){for(var t in e)return!1;return!0}switch(typeof HTMLCollection){case"object":case"function":if(e instanceof HTMLCollection)return 0===e.length}switch(typeof NodeList){case"object":case"function":if(e instanceof NodeList)return 0===e.length}return!1}Object.defineProperty(isEmpty,"not",{enumerable:!0,value:function isNotEmpty(e){return!isEmpty(e)}}),t.exports=isEmpty},{"@fav/type.is-array":17,"@fav/type.is-plain-object":21}],19:[function(e,t,r){"use strict";function isFunction(e){return"function"==typeof e}Object.defineProperty(isFunction,"not",{enumerable:!0,value:function isNotFunction(e){return"function"!=typeof e}}),t.exports=isFunction},{}],20:[function(e,t,r){"use strict";function isInteger(e){return"number"==typeof e?checkInteger(e):"[object Number]"===Object.prototype.toString.call(e)&&checkInteger(Number(e))}function checkInteger(e){return"function"!=typeof Number.isInteger?!!isFinite(e)&&(e<0?Math.ceil(e):Math.floor(e))===e:Number.isInteger(e)}Object.defineProperty(isInteger,"not",{enumerable:!0,value:function isNotInteger(e){return!isInteger(e)}}),t.exports=isInteger},{}],21:[function(e,t,r){"use strict";function isPlainObject(e){if("object"!=typeof e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;switch(Object.getPrototypeOf(e)){case Object.prototype:case null:return!0;default:return!1}}Object.defineProperty(isPlainObject,"not",{enumerable:!0,value:function isNotPlainObject(e){return!isPlainObject(e)}}),t.exports=isPlainObject},{}],22:[function(e,t,r){var n,i,o=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}}();var u,c=[],a=!1,f=-1;function cleanUpNextTick(){a&&u&&(a=!1,u.length?c=u.concat(c):f=-1,c.length&&drainQueue())}function drainQueue(){if(!a){var e=runTimeout(cleanUpNextTick);a=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,a=!1,function runClearTimeout(t){if(i===clearTimeout)return clearTimeout(t);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new Item(e,t)),1!==c.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],23:[function(c,e,a){(function(e,t){var n=c("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,o={},u=0;function Timeout(e,t){this._id=e,this._clearFn=t}a.setTimeout=function(){return new Timeout(r.call(setTimeout,window,arguments),clearTimeout)},a.setInterval=function(){return new Timeout(r.call(setInterval,window,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},a.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},a.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},a._unrefActive=a.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function onTimeout(){e._onTimeout&&e._onTimeout()},t))},a.setImmediate="function"==typeof e?e:function(e){var t=u++,r=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,n(function onNextTick(){o[t]&&(r?e.apply(null,r):e.call(null),a.clearImmediate(t))}),t},a.clearImmediate="function"==typeof t?t:function(e){delete o[e]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":22,timers:23}]},{},[1])(1)});
//# sourceMappingURL=fav.test.framework.min.js.map